# üõ† –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ ‚Äî Fantasy Draft App

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 2025-10-23  
**–°—Ç–∞—Ç—É—Å:** –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

---

## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 8.5/10 | –ú–æ–¥—É–ª—å–Ω–∞—è, —á–∏—Å—Ç–∞—è, —Ö–æ—Ä–æ—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | 8/10 | 47+ unit/integration, e2e –Ω–∞ 3 –±—Ä–∞—É–∑–µ—Ä–∞—Ö |
| **Security** | 7/10 | –ë–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –µ—Å—Ç—å, –Ω—É–∂–Ω—ã rate limiting + CSRF |
| **Scalability** | 7/10 | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 50-100 users, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ SQLite |
| **Code Quality** | 9/10 | TypeScript strict, Zod validation, ESLint |
| **Documentation** | 9/10 | README, TECHNICAL_SPEC, REQUIREMENTS, QUICKSTART |
| **CI/CD** | 8.5/10 | GitHub Actions, multi-browser e2e |
| **Production Ready** | 7.5/10 | MVP –≥–æ—Ç–æ–≤, –Ω—É–∂–Ω—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è >100 users |

**–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞:** **8/10** (–≥–æ—Ç–æ–≤ –∫ internal testing, —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è public release)

---

## 1Ô∏è‚É£ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: routes, services, adapters, persistence
   - –°–ª–∞–±–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
   - –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

2. **Singleton pattern –¥–ª—è DraftRoomManager**
   - REST API –∏ Socket.IO –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
   - –ù–µ—Ç race condition –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

3. **Repository pattern –¥–ª—è persistence**
   - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ SQLite/in-memory
   - –õ–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL

4. **Session middleware (–æ–±—â–∏–π –¥–ª—è REST + Socket.IO)**
   - userId –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Å–µ—Å—Å–∏–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
   - –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ auth

5. **TypeScript + Zod validation**
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ runtime
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### ‚ö†Ô∏è –°–ª–∞–±—ã–µ –º–µ—Å—Ç–∞

1. **Single instance (no Redis adapter)**
   - Horizontal scaling –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω
   - Single point of failure
   - **–†–µ—à–µ–Ω–∏–µ:** Redis Pub/Sub adapter –¥–ª—è Socket.IO (v1.0)

2. **SQLite write lock**
   - –¢–æ–ª—å–∫–æ 1 writer –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - Bottleneck –ø—Ä–∏ >100 concurrent users
   - **–†–µ—à–µ–Ω–∏–µ:** –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL (v2.0)

3. **In-memory session store**
   - –ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —Ä–µ—Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
   - –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ multi-instance —Å—Ü–µ–Ω–∞—Ä–∏–∏
   - **–†–µ—à–µ–Ω–∏–µ:** Redis session store —á–µ—Ä–µ–∑ Upstash Free Tier (v1.0)

4. **DraftTimerManager –Ω–µ fault-tolerant**
   - –ü—Ä–∏ crash —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞–π–º–µ—Ä—ã —Ç–µ—Ä—è—é—Ç—Å—è
   - –ù–µ—Ç distributed lock
   - **–†–µ—à–µ–Ω–∏–µ:** Offload —Ç–∞–π–º–µ—Ä—ã –≤ Redis (v2.0)

5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ graceful shutdown**
   - WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü–æ—Ç–µ—Ä—è in-flight –∑–∞–ø—Ä–æ—Å–æ–≤
   - **–†–µ—à–µ–Ω–∏–µ:** SIGTERM handler + socket.close() (v1.0)

---

## 2Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (60+ —Ç–µ—Å—Ç–æ–≤)

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–∞—Ç—É—Å |
|-----------|-----------|--------|
| **REST API** | 39 —Ç–µ—Å—Ç–æ–≤ | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **Socket.IO** | 4 —Ç–µ—Å—Ç–∞ | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **Unit (business logic)** | 4 —Ç–µ—Å—Ç–∞ | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **Persistence** | 3 —Ç–µ—Å—Ç–∞ | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |
| **E2E (Playwright)** | 4 √ó 3 –±—Ä–∞—É–∑–µ—Ä–∞ = 12 | ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç |

**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** ~70% (–æ—Ü–µ–Ω–æ—á–Ω–æ)

### ‚ö†Ô∏è –ß—Ç–æ –ù–ï –ø–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏

#### Backend (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã)

1. **Admin API** (`/api/admin/*`) ‚Äî 0 —Ç–µ—Å—Ç–æ–≤
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π

2. **LobbyManager.addBots()** ‚Äî –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ
   - –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤
   - –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–ø–∏–∫ –±–æ—Ç–æ–≤

3. **DraftTimer autopick** ‚Äî –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –∞–≤—Ç–æ–ø–∏–∫ –ø—Ä–∏ disconnect

4. **Snake draft multi-round** ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ
   - –¢–µ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –Ω–∞ 2 —Ä–∞—É–Ω–¥–∞
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ 6 —Ä–∞—É–Ω–¥–æ–≤ (full draft)

5. **Error handling edge cases** ‚Äî —á–∞—Å—Ç–∏—á–Ω–æ
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ DB failure
   - –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –Ω–∞ Socket.IO disconnect/reconnect

#### Frontend (–ø–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤)

- LoginPage.tsx ‚Äî 0 —Ç–µ—Å—Ç–æ–≤
- Lobby.tsx ‚Äî 0 —Ç–µ—Å—Ç–æ–≤
- DraftRoom.tsx ‚Äî 0 —Ç–µ—Å—Ç–æ–≤
- TeamView.tsx ‚Äî 0 —Ç–µ—Å—Ç–æ–≤
- AllTeams.tsx ‚Äî 0 —Ç–µ—Å—Ç–æ–≤

### üìã –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è

**Priority 1 (v1.0):**
- [ ] Admin API tests (10 —Ç–µ—Å—Ç–æ–≤)
- [ ] LobbyManager.addBots tests (5 —Ç–µ—Å—Ç–æ–≤)
- [ ] DraftTimer autopick tests (5 —Ç–µ—Å—Ç–æ–≤)
- [ ] Snake draft full cycle (3 —Ç–µ—Å—Ç–∞)
- [ ] Error handling (10 —Ç–µ—Å—Ç–æ–≤)

**Priority 2 (v1.1):**
- [ ] Frontend unit tests (React Testing Library) ‚Äî 20+ —Ç–µ—Å—Ç–æ–≤
- [ ] Frontend integration tests (Vitest) ‚Äî 10 —Ç–µ—Å—Ç–æ–≤
- [ ] Load testing (k6 –∏–ª–∏ Apache JMeter) ‚Äî 3 —Å—Ü–µ–Ω–∞—Ä–∏—è

---

## 3Ô∏è‚É£ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –ú–µ—Ö–∞–Ω–∏–∑–º | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|----------|
| Session-based auth | ‚úÖ | httpOnly cookies, express-session |
| Password hashing | ‚úÖ | bcrypt (10 rounds) |
| CORS | ‚úÖ | Whitelist –¥–ª—è production (`CORS_ORIGIN`) |
| SQL injection | ‚úÖ | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (better-sqlite3) |
| XSS protection | ‚úÖ | React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ |
| RBAC | ‚úÖ | Admin –Ω–µ –º–æ–∂–µ—Ç force-pick/undo |

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è (v1.0)

| –£—è–∑–≤–∏–º–æ—Å—Ç—å | –†–∏—Å–∫ | –†–µ—à–µ–Ω–∏–µ |
|-----------|------|---------|
| **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting** | üî¥ HIGH | express-rate-limit (5 req/min –Ω–∞ /auth, 10 –Ω–∞ /pick) |
| **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CSRF –∑–∞—â–∏—Ç—ã** | üî¥ HIGH | csurf middleware |
| **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ input sanitization** | üü° MEDIUM | express-validator + DOMPurify |
| **SESSION_SECRET —Å—Ç–∞—Ç–∏—á–Ω—ã–π** | üü° MEDIUM | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –ø—Ä–∏ deployment |
| **–ù–µ—Ç MFA –¥–ª—è –∞–¥–º–∏–Ω–∞** | üü¢ LOW | –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (v2.0) |

### üõ° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (v1.0):**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ endpoints
2. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å CSRF protection
3. ‚úÖ Input sanitization (–æ—Å–æ–±–µ–Ω–Ω–æ login, teamName)
4. ‚úÖ Secure headers (helmet configuration)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (v2.0):**
5. MFA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (Google Authenticator)
6. Audit logs –¥–ª—è –≤—Å–µ—Ö admin-–æ–ø–µ—Ä–∞—Ü–∏–π
7. IP whitelisting –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

---

## 4Ô∏è‚É£ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (Single Instance)

| –ú–µ—Ç—Ä–∏–∫–∞ | –õ–∏–º–∏—Ç | –ü—Ä–∏—á–∏–Ω–∞ |
|---------|-------|---------|
| **Concurrent users** | ~100 | SQLite write lock |
| **WebSocket connections** | ~10,000 | Node.js limit |
| **Concurrent drafts** | ~10 | Memory constraints (in-memory state) |
| **Draft picks/sec** | ~50 | SQLite write bottleneck |

### –ë–µ–Ω—á–º–∞—Ä–∫–∏ (–ø–æ –¥–∞–Ω–Ω—ã–º –∞–Ω–∞–ª–∏–∑–∞)

**SQLite vs PostgreSQL (bulk write 100k rows):**
- SQLite: 23,386 ms (**23 —Å–µ–∫**)
- PostgreSQL: 2,095 ms (**2 —Å–µ–∫**)
- **–†–∞–∑–Ω–∏—Ü–∞: 10x –º–µ–¥–ª–µ–Ω–Ω–µ–µ**

**Node.js Single Thread:**
- 1 CPU core –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ 4-8 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- CPU underutilized (75-87% idle)

### üöÄ Roadmap –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

#### v1.0 (50-100 users) ‚Äî **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**
- [ ] Redis session store (Upstash Free: 10k commands/day)
- [ ] Graceful shutdown (SIGTERM handler)
- [ ] Health checks (DB ping + Socket.IO status)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0/–º–µ—Å—è—Ü

#### v2.0 (100-500 users) ‚Äî **Low Budget**
- [ ] PostgreSQL –≤–º–µ—Å—Ç–æ SQLite (Railway: $5/month)
- [ ] Redis Pub/Sub adapter –¥–ª—è Socket.IO
- [ ] Node.js clustering (4 workers)
- [ ] Connection pooling (pgBouncer)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$10-15/–º–µ—Å—è—Ü

#### v3.0 (500-1000+ users) ‚Äî **Production**
- [ ] Kubernetes auto-scaling
- [ ] Multi-region deployment
- [ ] CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (CloudFlare)
- [ ] Load balancer (nginx + sticky sessions)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $50-100/–º–µ—Å—è—Ü

---

## 5Ô∏è‚É£ Code Quality

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **TypeScript strict mode**
   - –ù–µ—Ç `any` —Ç–∏–ø–æ–≤ (–ø–æ—á—Ç–∏ –≤–µ–∑–¥–µ)
   - Zod inference –¥–ª—è —Ç–∏–ø–æ–≤ (`z.infer<typeof Schema>`)

2. **ESLint + Prettier**
   - –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - –õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
   - –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π

4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ JSDoc**
   - –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∞

### ‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

1. **console.log –≤–º–µ—Å—Ç–æ structured logging**
   - –ù–µ—Ç —É—Ä–æ–≤–Ω–µ–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (info, warn, error)
   - –ù–µ—Ç JSON-—Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
   - **–†–µ—à–µ–Ω–∏–µ:** Winston (v1.0)

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ error boundaries –Ω–∞ frontend**
   - –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫—Ä–∞—à–∞—Ç –≤–µ—Å—å UI
   - **–†–µ—à–µ–Ω–∏–µ:** React Error Boundaries (v1.0)

3. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ frontend**
   - –ù–µ—Ç user-friendly —Å–æ–æ–±—â–µ–Ω–∏–π
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - **–†–µ—à–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π error handler (v1.0)

4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ (TypeScript + Zod)**
   - –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –¥–≤–∞–∂–¥—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `z.infer` –≤–µ–∑–¥–µ (v1.0)

---

## 6Ô∏è‚É£ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚úÖ –ß—Ç–æ –µ—Å—Ç—å

| –î–æ–∫—É–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–∞—á–µ—Å—Ç–≤–æ |
|----------|--------|----------|
| README.md | ‚úÖ | 9/10 (–ø–æ–¥—Ä–æ–±–Ω—ã–π, —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏) |
| TECHNICAL_SPEC.md | ‚úÖ | 9/10 (–ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è) |
| REQUIREMENTS.md | ‚úÖ | 9/10 (–±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è) |
| QUICKSTART.md | ‚úÖ | 8/10 (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) |
| OpenAPI/Swagger | ‚úÖ | 8/10 (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) |
| CI/CD docs | ‚úÖ | 7/10 (–≤ .windsurf/workflows/) |

### ‚ö†Ô∏è –ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

- [ ] **Deployment guide** (–ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è production)
- [ ] **Troubleshooting guide** (—á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è)
- [ ] **Architecture diagrams** (–≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã)
- [ ] **Contributing guidelines** (–∫–∞–∫ –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–∏—Ç—å)
- [ ] **Changelog** (–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ –≤–µ—Ä—Å–∏—è–º)
- [ ] **API Rate Limits** (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ª–∏–º–∏—Ç–∞–º, –∫–æ–≥–¥–∞ –±—É–¥—É—Ç –≤–Ω–µ–¥—Ä–µ–Ω—ã)

---

## 7Ô∏è‚É£ Performance

### Bottlenecks (—É–∑–∫–∏–µ –º–µ—Å—Ç–∞)

1. **üî¥ SQLite write lock**
   - **–°–∏–º–ø—Ç–æ–º:** –ú–µ–¥–ª–µ–Ω–Ω—ã–µ draft picks –ø—Ä–∏ >50 concurrent users
   - **–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–ª—å–∫–æ 1 writer –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - **–†–µ—à–µ–Ω–∏–µ:** PostgreSQL (MVCC allows concurrent writes)

2. **üü° DraftTimerManager –≤ single thread**
   - **–°–∏–º–ø—Ç–æ–º:** –í—ã—Å–æ–∫–∞—è CPU –Ω–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ >100 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
   - **–ü—Ä–∏—á–∏–Ω–∞:** setInterval –≤ main event loop
   - **–†–µ—à–µ–Ω–∏–µ:** Offload —Ç–∞–π–º–µ—Ä—ã –≤ Redis –∏–ª–∏ Worker Threads

3. **üü° /players endpoint –±–µ–∑ pagination**
   - **–°–∏–º–ø—Ç–æ–º:** 700+ –∏–≥—Ä–æ–∫–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—Ä–∞–∑—É (~500KB response)
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç limit/offset
   - **–†–µ—à–µ–Ω–∏–µ:** Cursor-based pagination (v1.0)

4. **üü¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - **–°–∏–º–ø—Ç–æ–º:** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å /players —á–∏—Ç–∞–µ—Ç –∏–∑ DB
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç Redis cache
   - **–†–µ—à–µ–Ω–∏–µ:** Redis –¥–ª—è available players list (v2.0)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Priority 1 (v1.0):**
- [ ] Pagination –¥–ª—è /players (limit=50, offset)
- [ ] DB indexes –Ω–∞ drafted_by, position, eligiblePositions
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–ø–∏–∫–∞ (pre-sorted lists)

**Priority 2 (v2.0):**
- [ ] Redis caching –¥–ª—è available players
- [ ] PostgreSQL connection pooling (pgBouncer)
- [ ] CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (CloudFlare)

---

## 8Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Observability

### ‚ö†Ô∏è –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: Blind Spot

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç structured logging (—Ç–æ–ª—å–∫–æ console.log)
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ (CPU, RAM, API latency)
- –ù–µ—Ç error tracking (Sentry/Rollbar)
- –ù–µ—Ç APM (Application Performance Monitoring)

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–ª–∞–¥–∏—Ç—å production issues
- –ù–µ –≤–∏–¥–Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–µ –≤–∏–¥–Ω–æ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (v1.0)

1. **Structured Logging (Winston)**
   ```typescript
   logger.info('Draft pick successful', {
     userId: 'user-123',
     playerId: 'player-456',
     roomId: 'room-789',
     elapsedMs: 245,
   });
   ```

2. **Health Check Endpoint**
   ```typescript
   GET /health ‚Üí {
     status: 'healthy',
     checks: {
       database: 'ok',
       socketio: 'ok (12 connections)',
       memory: 'ok (150MB / 512MB)'
     }
   }
   ```

3. **Error Tracking (Sentry) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π capture –≤—Å–µ—Ö exceptions
   - Stack traces –¥–ª—è debugging
   - User context (userId, roomId)

4. **Prometheus Metrics (v2.0)**
   - API request count/latency
   - Draft picks per second
   - WebSocket connections count
   - Memory/CPU usage

---

## 9Ô∏è‚É£ Deployment

### –¢–µ–∫—É—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|--------|--------|-------------|
| **Code quality** | ‚úÖ | TypeScript, ESLint, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç |
| **Security** | ‚ö†Ô∏è | –ë–∞–∑–æ–≤–∞—è –∑–∞—â–∏—Ç–∞ –µ—Å—Ç—å, –Ω—É–∂–Ω—ã rate limiting + CSRF |
| **Scalability** | ‚ö†Ô∏è | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 50-100 users |
| **Monitoring** | ‚ùå | –ù–µ—Ç structured logging, –Ω–µ—Ç –º–µ—Ç—Ä–∏–∫ |
| **Documentation** | ‚úÖ | –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API + deployment |
| **CI/CD** | ‚úÖ | GitHub Actions, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã |

**–ò—Ç–æ–≥:** –ì–æ—Ç–æ–≤ –∫ **internal testing** (–∑–∞–∫—Ä—ã—Ç–∞—è –∞–ª—å—Ñ–∞/–±–µ—Ç–∞), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–¥ **public release**.

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier)

1. **Railway** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - Pros: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deploy –∏–∑ GitHub
   - Cons: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 500 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü
   - **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** MVP, 50-100 users

2. **Render**
   - Pros: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier, SQLite –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
   - Cons: –°–ø—è—â–∏–π —Ä–µ–∂–∏–º –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** Demo, personal use

3. **Fly.io**
   - Pros: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier, regions –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
   - Cons: –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π setup
   - **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** Production-ready deployment

---

## üîü –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Action Plan)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (v1.0) ‚Äî –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ public release

1. ‚úÖ **Rate limiting** (express-rate-limit)
   - `/api/auth/*`: 5 req/min
   - `/api/draft/pick`: 10 req/min

2. ‚úÖ **CSRF protection** (csurf middleware)

3. ‚úÖ **Structured logging** (Winston)

4. ‚úÖ **Graceful shutdown** (SIGTERM handler)

5. ‚úÖ **Health check endpoint** (DB ping + Socket.IO)

6. ‚úÖ **Input sanitization** (express-validator)

7. ‚úÖ **Error messages UX** (user-friendly –≤–º–µ—Å—Ç–æ raw errors)

### üü° –í–∞–∂–Ω–æ (v1.1) ‚Äî –°–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è

8. [ ] **Frontend unit tests** (React Testing Library)

9. [ ] **Admin API tests** (10 —Ç–µ—Å—Ç–æ–≤)

10. [ ] **Pagination –¥–ª—è /players** (limit/offset)

11. [ ] **DB indexes** (drafted_by, position)

12. [ ] **Redis session store** (Upstash Free Tier)

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (v2.0) ‚Äî Backlog

13. [ ] **PostgreSQL migration**

14. [ ] **Node.js clustering** (4 workers)

15. [ ] **Load testing** (k6)

16. [ ] **Prometheus + Grafana**

17. [ ] **Error tracking** (Sentry)

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: **8/10**

**–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π MVP** —Å —Ö–æ—Ä–æ—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, —Ç–µ—Å—Ç–∞–º–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ –Ω–µ—Ç.

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (–ß—Ç–æ —Ö–æ—Ä–æ—à–æ)
- ‚úÖ –ß–∏—Å—Ç–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (60+ —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README, TECHNICAL_SPEC, REQUIREMENTS)
- ‚úÖ CI/CD –Ω–∞—Å—Ç—Ä–æ–µ–Ω (GitHub Actions)
- ‚úÖ TypeScript strict + Zod validation

### –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è (–ß—Ç–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å)
- ‚ö†Ô∏è Security hardening (rate limiting, CSRF, input sanitization)
- ‚ö†Ô∏è Monitoring (structured logging, health checks)
- ‚ö†Ô∏è Scalability (–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –¥–æ 100+ users)
- ‚ö†Ô∏è Error handling UX (user-friendly messages)

### –í–µ—Ä–¥–∏–∫—Ç

**–ì–æ—Ç–æ–≤ –∫ internal testing** (–∑–∞–∫—Ä—ã—Ç–∞—è –∞–ª—å—Ñ–∞ —Å 10-50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏) ‚úÖ  
**–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–¥ public release** (50-100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) ‚ö†Ô∏è

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏–∑ v1.0 (security + monitoring)
2. –ü—Ä–æ–≤–µ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç–æ–µ –±–µ—Ç–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å 20-30 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
3. –°–æ–±—Ä–∞—Ç—å feedback –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –±–∞–≥–∏
4. Public release –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è v1.0

---

**–ê—É–¥–∏—Ç –ø—Ä–æ–≤–µ–¥—ë–Ω:** 23.10.2025  
**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è v1.0
