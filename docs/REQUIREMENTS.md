# REQUIREMENTS.md ‚Äî Fantasy Draft App (NHL)

**–í–µ—Ä—Å–∏—è:** 2.0  
**–î–∞—Ç–∞:** 2025-10-23  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞—É–¥–∏—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)

---

## 1. –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

Fantasy Draft App ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –¥—Ä–∞—Ñ—Ç–æ–≤ –ø–æ —Ö–æ–∫–∫–µ—é NHL —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- **Salary cap** ($95,000,000 –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º NHL)
- **–ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤** (eligiblePositions —á–µ—Ä–µ–∑ NHL API)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ –æ—á–∫–æ–≤** –ø–æ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–∏–Ω–≥–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª–µ (17 –º–µ—Ç—Ä–∏–∫ –¥–ª—è skaters, 7 –¥–ª—è goalies)
- **Real-time –¥—Ä–∞—Ñ—Ç–∞** —á–µ—Ä–µ–∑ WebSocket (Socket.IO)

**–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:** 50-100 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –æ–¥–Ω–æ–π –ª–∏–≥–µ  
**–ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –¥—Ä–∞—Ñ—Ç—ã —Å –∞–∫–∫—É–º—É–ª—è—Ü–∏–µ–π –æ—á–∫–æ–≤ –≤ —Å–µ–∑–æ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### 2.1 –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ª–æ–±–±–∏/–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞–¥–º–∏–Ω
**–ú–æ–∂–µ—Ç:**
- –°–æ–∑–¥–∞–≤–∞—Ç—å –¥—Ä–∞—Ñ—Ç-–∫–æ–º–Ω–∞—Ç—É
- –ó–∞–ø—É—Å–∫–∞—Ç—å –¥—Ä–∞—Ñ—Ç (`lobby:start`)
- –°—Ç–∞–≤–∏—Ç—å –¥—Ä–∞—Ñ—Ç –Ω–∞ –ø–∞—É–∑—É/–≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å (`draft:pause`, `draft:resume`) ‚Äî —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞–¥–º–∏–Ω
- –î–æ–±–∞–≤–ª—è—Ç—å –±–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`lobby:addBots`)
- –ò—Å–∫–ª—é—á–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –ª–æ–±–±–∏ (`lobby:kick`)
- –£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ª–æ–≥–∏–Ω, —Ä–æ–ª—å, –∫–æ–º–∞–Ω–¥–∞, –ø–∞—Ä–æ–ª—å)

**–ù–ï –º–æ–∂–µ—Ç (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ):**
- Force-pick (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ –∑–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- Undo (–æ—Ç–º–µ–Ω–∞ –ø–∏–∫–æ–≤)
- –õ—é–±–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –≤ –ª–æ–≥–∏–∫—É –¥—Ä–∞—Ñ—Ç–∞ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –ß–µ—Å—Ç–Ω–æ—Å—Ç—å –¥—Ä–∞—Ñ—Ç–∞ ‚Äî –∫–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø. –ê–¥–º–∏–Ω —Ç–æ–ª—å–∫–æ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å, –Ω–µ –≤–ª–∏—è—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

#### –£—á–∞—Å—Ç–Ω–∏–∫
**–ú–æ–∂–µ—Ç:**
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –∫ –¥—Ä–∞—Ñ—Ç-–∫–æ–º–Ω–∞—Ç–µ
- –í—ã–±–∏—Ä–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å–≤–æ–π —Ö–æ–¥
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤—ã –¥—Ä—É–≥–∏—Ö –∫–æ–º–∞–Ω–¥ (All Teams page)
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- Reconnect –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (60 —Å–µ–∫ grace period)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ü–∏–∫ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ–π —Ö–æ–¥
- Salary cap –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª–æ—Ç

#### –ì–æ—Å—Ç—å (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
**–ú–æ–∂–µ—Ç:**
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥—Ä–∞—Ñ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å leaderboard

---

### 2.2 –ö–æ–º–Ω–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –∏ –¥—Ä–∞—Ñ—Ç

#### –ö–æ–º–Ω–∞—Ç–∞ (Draft Room)
- **–û–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞** –Ω–∞ —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π `roomId` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `weekly-draft`)
- –ú–∏–Ω–∏–º—É–º 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

#### –î—Ä–∞—Ñ—Ç
- **–¢–∏–ø:** Snake draft (—Ä–µ–≤–µ—Ä—Å –ø–æ—Ä—è–¥–∫–∞ –≤ —á—ë—Ç–Ω—ã—Ö —Ä–∞—É–Ω–¥–∞—Ö)
- **–†–∞—É–Ω–¥—ã:** 6 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–†–∞–∑–º–µ—Ä —Ä–æ—Å—Ç–µ—Ä–∞:** 6 –ø–æ–∑–∏—Ü–∏–π (LW, C, RW, D, D, G)
- **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–±–æ—Ä–∞:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (`pickOrder`)
- **–¢–∞–π–º–µ—Ä –Ω–∞ –ø–∏–∫:** 60 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `timerSec`)

#### –ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–∏
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: C/LW)
- –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω** —Å–ª–æ—Ç –≤ —Ä–æ—Å—Ç–µ—Ä–µ
- –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ C/LW, –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –ª–∏–±–æ –Ω–∞ C, –ª–∏–±–æ –Ω–∞ LW, –Ω–æ **–Ω–µ –Ω–∞ –æ–±–∞**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Salary Cap
- **–õ–∏–º–∏—Ç:** $95,000,000 (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å NHL)
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ cap –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∏–∫
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI: –ø–æ—Ç—Ä–∞—á–µ–Ω–æ / –æ—Å—Ç–∞–ª–æ—Å—å / –ø—Ä–æ—Ü–µ–Ω—Ç
- –§–æ—Ä–º—É–ª–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ "value": `points / (capHit / 1_000_000)`

---

### 2.3 –õ–æ–≥–∏–∫–∞ –ø–∏–∫–∞, —Ç–∞–π–º–µ—Ä—ã –∏ reconnect

#### –¢–∞–π–º–µ—Ä –Ω–∞ –ø–∏–∫
- **60 —Å–µ–∫—É–Ω–¥** —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ (–Ω–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ)
- –¢–∏–∫–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É —á–µ—Ä–µ–∑ WebSocket (`draft:timer`)
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–≤—Ç–æ–ø–∏–∫

#### –ê–≤—Ç–æ–ø–∏–∫ (autopick)
- **–¢—Ä–∏–≥–≥–µ—Ä:** –ò—Å—Ç–µ—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ (60 —Å–µ–∫)
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –õ—É—á—à–∏–π –∏–≥—Ä–æ–∫ –ø–æ –æ—á–∫–∞–º –ø—Ä–æ—à–ª–æ–≥–æ —Å–µ–∑–æ–Ω–∞ (`stats.points`)
- **–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è:**
  - –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ä–æ—Å—Ç–µ—Ä–µ
  - Salary cap (–∏–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –≤–ª–µ–∑–∞—Ç—å)
  - –£–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∏
- **–ò–Ω–¥–∏–∫–∞—Ü–∏—è:** –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π badge `auto` –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–∏–∫–æ–≤

#### Reconnect Grace Period
- **60 —Å–µ–∫—É–Ω–¥** –Ω–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ü—Ä–∏ disconnect:
  - –°—Ç–∞—Ç—É—Å –∏–≥—Ä–æ–∫–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "reconnecting"
  - –î—Ä–∞—Ñ—Ç **—Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ –ø–∞—É–∑—É** (—Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)
  - –î—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç —Å—Ç–∞—Ç—É—Å
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º reconnect:
  - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥—Ä–∞—Ñ—Ç–∞
  - –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–µ–≥–æ –ø–∏–∫–∞
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ 60 —Å–µ–∫ –±–µ–∑ reconnect:
  - –ê–≤—Ç–æ–ø–∏–∫ –∑–∞ –æ—Ç–∫–ª—é—á–∏–≤—à–µ–≥–æ—Å—è –∏–≥—Ä–æ–∫–∞
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å

#### –ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚ùå **Force-pick:** –ê–¥–º–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –∏–≥—Ä–æ–∫–∞ –∑–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- ‚ùå **Undo:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —É–∂–µ —Å–¥–µ–ª–∞–Ω–Ω—ã–π –ø–∏–∫
- ‚ùå **–†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞:** –¢–æ–ª—å–∫–æ pause/resume –≤—Å–µ–≥–æ –¥—Ä–∞—Ñ—Ç–∞

---

## 3. –î–∞–Ω–Ω—ã–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 3.1 –ò–≥—Ä–æ–∫–∏ –∏ –ø—É–ª –¥–∞–Ω–Ω—ã—Ö

#### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **–û—Å–Ω–æ–≤–Ω–æ–π:** NHL Official API (https://api-web.nhle.com/)
- **Fallback:** ESPN API / Capwages.com (–ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API)
- **–ü–∞—Ä—Å–∏–Ω–≥:** Cron job –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Player
```typescript
interface Player {
  id: string;
  firstName: string;
  lastName: string;
  eligiblePositions: ('C' | 'LW' | 'RW' | 'D' | 'G')[];  // –ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–∏
  capHit: number;                                         // –ó–∞—Ä–ø–ª–∞—Ç–∞ –≤ $
  nhlTeam: string;                                        // –ö–æ–º–∞–Ω–¥–∞ NHL
  injuryStatus?: {
    injured: boolean;
    description: string;  // "Upper Body", "Day-to-Day", etc.
  };
  stats: {
    games: number;
    goals: number;
    assists: number;
    points: number;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  };
  draftedBy: string | null;
  draftWeek: number | null;
}
```

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç—Ä–∞–≤–º—ã
- –ï—Å–ª–∏ `injuryStatus.injured === true`:
  - ‚ö†Ô∏è Warning –≤ UI –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–≥—Ä–æ–∫–∞
  - Draft **–≤–æ–∑–º–æ–∂–µ–Ω**, –Ω–æ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –Ω–µ –≤—ã–±–∏—Ä–∞—Ç—å —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

---

### 3.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥—ã

```typescript
interface Team {
  userId: string;
  teamName: string;
  logo: string;
  players: string[];         // Array of player IDs
  slots: [
    { position: 'LW', playerId: string | null },
    { position: 'C',  playerId: string | null },
    { position: 'RW', playerId: string | null },
    { position: 'D',  playerId: string | null },
    { position: 'D',  playerId: string | null },
    { position: 'G',  playerId: string | null }
  ];
  salaryTotal: number;       // Max 95,500,000
  week: number;
}
```

**–°–ª–æ—Ç—ã —Ä–æ—Å—Ç–µ—Ä–∞:**
| –ü–æ–∑–∏—Ü–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| LW | 1 | Left Wing |
| C | 1 | Center |
| RW | 1 | Right Wing |
| D | 2 | Defense (–¥–≤–∞ –∑–∞—â–∏—Ç–Ω–∏–∫–∞) |
| G | 1 | Goaltender |

---

## 4. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ ("scoring")

### 4.1 –°–∫–æ—Ä–∏–Ω–≥ –¥–ª—è Skaters (–ø–æ–ª–µ–≤—ã–µ –∏–≥—Ä–æ–∫–∏)

| –ú–µ—Ç—Ä–∏–∫–∞ | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------------|----------|
| Goals (G) | **5** | –ó–∞–±–∏—Ç—ã–π –≥–æ–ª |
| Assists (A) | **3** | –ì–æ–ª–µ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ |
| Plus/Minus (+/-) | **¬±1** | –ó–∞ –∫–∞–∂–¥–æ–µ +1 –∏–ª–∏ -1 |
| Penalty Minutes (PIM) | **-0.3** | –ó–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É —à—Ç—Ä–∞—Ñ–∞ |
| Power Play Goals (PPG) | **0.5** | –ì–æ–ª –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ |
| Power Play Assists (PPA) | **0.3** | –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ |
| Short Handed Goals (SHG) | **2** | –ì–æ–ª –≤ –º–µ–Ω—å—à–∏–Ω—Å—Ç–≤–µ |
| Short Handed Assists (SHA) | **1** | –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –º–µ–Ω—å—à–∏–Ω—Å—Ç–≤–µ |
| Game-Winning Goals (GWG) | **1** | –ü–æ–±–µ–¥–Ω—ã–π –≥–æ–ª |
| Faceoffs Won (FOW) | **0.1** | –ó–∞ –∫–∞–∂–¥–æ–µ –≤—ã–∏–≥—Ä–∞–Ω–Ω–æ–µ –≤–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ |
| Faceoffs Lost (FOL) | **-0.05** | –ó–∞ –∫–∞–∂–¥–æ–µ –ø—Ä–æ–∏–≥—Ä–∞–Ω–Ω–æ–µ –≤–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ |
| Hat Tricks (HAT) | **4** | –ë–æ–Ω—É—Å –∑–∞ —Ö–µ—Ç-—Ç—Ä–∏–∫ (3+ –≥–æ–ª–∞) |
| Shots on Goal (SOG) | **0.3** | –ó–∞ –∫–∞–∂–¥—ã–π –±—Ä–æ—Å–æ–∫ –≤ —Å—Ç–≤–æ—Ä |
| Hits (HIT) | **0.55** | –ó–∞ –∫–∞–∂–¥—ã–π —Å–∏–ª–æ–≤–æ–π –ø—Ä–∏—ë–º |
| Blocked Shots (BLK) | **0.55** | –ó–∞ –∫–∞–∂–¥—ã–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—Ä–æ—Å–æ–∫ |
| Defensemen Points (DEF) | **0.65** | –ë–æ–Ω—É—Å –∑–∞ –æ—á–∫–æ –∑–∞—â–∏—Ç–Ω–∏–∫–∞ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç—Ä–∏–∫–∞ `DEF` –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∑–∞—â–∏—Ç–Ω–∏–∫–∞–º** –∑–∞ –∫–∞–∂–¥–æ–µ –Ω–∞–±—Ä–∞–Ω–Ω–æ–µ –æ—á–∫–æ (G –∏–ª–∏ A).

### 4.2 –°–∫–æ—Ä–∏–Ω–≥ –¥–ª—è Goaltenders (–≤—Ä–∞—Ç–∞—Ä–∏)

| –ú–µ—Ç—Ä–∏–∫–∞ | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|------------|----------|
| Games Started (GS) | **1.5** | –ó–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é –∏–≥—Ä—É |
| Wins (W) | **2.5** | –ó–∞ –ø–æ–±–µ–¥—É |
| Losses (L) | **-1** | –ó–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ |
| Goals Against (GA) | **-1.8** | –ó–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –≥–æ–ª |
| Saves (SV) | **0.35** | –ó–∞ –∫–∞–∂–¥—ã–π —Å–µ–π–≤ |
| Shutouts (SO) | **8** | –ó–∞ "—Å—É—Ö—É—é" –∏–≥—Ä—É |
| Overtime Losses (OTL) | **0.3** | –ó–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ–≤–µ—Ä—Ç–∞–π–º–µ |

### 4.3 –û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –∏ UI

#### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π** –ø–æ –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É
- **–†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Ç–∏–ø—É –æ—á–∫–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä: Goals: 10, Assists: 6, PPG: 2)
- **–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –æ—á–∫–æ–≤** –∑–∞ –Ω–µ–¥–µ–ª—é
- **–ü–æ–∑–∏—Ü–∏—è –≤ leaderboard**

#### Leaderboard
- **–ù–µ–¥–µ–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥** (—Ç–æ–ø-10 –ø–æ –æ—á–∫–∞–º –Ω–µ–¥–µ–ª–∏)
- **–°–µ–∑–æ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥** (–Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –æ—á–∫–∏ –∑–∞ –≤—Å–µ –Ω–µ–¥–µ–ª–∏)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–µ–¥–µ–ª—è–º
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ—á–∫–∞–º, salary efficiency, etc.

---

## 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å

### 5.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Session-based auth** (express-session + httpOnly cookies)
- **Password hashing** (bcrypt, 10 rounds)
- **RBAC** (Role-Based Access Control):
  - Admin: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é
  - User: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º
  - Guest: —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### 5.2 –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫
- **Rate limiting** (v1.0):
  - `/api/auth/*`: 5 req/min
  - `/api/draft/pick`: 10 req/min
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ endpoints: 100 req/min
- **CSRF protection** (v1.0): csurf middleware
- **XSS protection**: React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **SQL injection**: –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **CORS**: whitelist –¥–ª—è production (`CORS_ORIGIN` env)

### 5.3 –ê—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- Draft pick ‚Üí –ê—Ç–æ–º–∞—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (player, team, draftState)
- Kick user ‚Üí –ê—Ç–æ–º–∞—Ä–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –ª–æ–±–±–∏ –∏ –∫–æ–º–∞–Ω–¥—ã
- Leaderboard update ‚Üí –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å rollback –ø—Ä–∏ –æ—à–∏–±–∫–µ

### 5.4 Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
**–ü—Ä–∏ —Å–±–æ–µ NHL API:**
1. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (retry 3 —Ä–∞–∑–∞)
2. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ fallback API (ESPN)
3. –ï—Å–ª–∏ fallback –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –¥–ª—è admin dashboard

---

## 6. UI/UX –∏ Edge Cases

### 6.1 Draft Board (Real-time)
**–§—É–Ω–∫—Ü–∏–∏:**
- –í—Å–µ –ø–∏–∫–∏ –≤–∏–¥–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–∞–≤–æ–≤ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ (All Teams page)
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –≤–∞—à —Ö–æ–¥ (–∑–µ–ª—ë–Ω—ã–π), —á—É–∂–æ–π —Ö–æ–¥ (—Å–µ—Ä—ã–π)
- –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ (60 ‚Üí 0)

### 6.2 All Teams View
**–§—É–Ω–∫—Ü–∏–∏:**
- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –°–æ—Å—Ç–∞–≤—ã –∫–æ–º–∞–Ω–¥ (6 —Å–ª–æ—Ç–æ–≤)
- Salary cap –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- Value per $ (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)

### 6.3 –°–ø–µ—Ü–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
| –°–∏—Ç—É–∞—Ü–∏—è | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|----------|
| Reconnect | üîÑ "Reconnecting (45s)" | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è |
| Autopick | ü§ñ Badge "auto" | –ê–≤—Ç–æ–ø–∏–∫ –ø—Ä–æ–∏–∑–æ—à—ë–ª |
| Your turn | üéØ "–í–ê–® –•–û–î" (–∑–µ–ª—ë–Ω—ã–π) | –°–µ–π—á–∞—Å –≤–∞—à–∞ –æ—á–µ—Ä–µ–¥—å |
| Cap warning | ‚ö†Ô∏è "$2.5M left" | –û—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ cap |
| Injured | ‚ö†Ô∏è "Injured (Day-to-Day)" | –ò–≥—Ä–æ–∫ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω |

### 6.4 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (User-Friendly)
**–í–º–µ—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**
- ‚ùå `"Not your turn!"` ‚Üí ‚úÖ `"‚è≥ –ü–æ–¥–æ–∂–¥–∏—Ç–µ —Å–≤–æ–µ–≥–æ —Ö–æ–¥–∞ (—Å–µ–π—á–∞—Å —Ö–æ–¥–∏—Ç Team Alpha)"`
- ‚ùå `"Salary cap exceeded!"` ‚Üí ‚úÖ `"üí∞ –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞—Ä–ø–ª–∞—Ç ($95M). –£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å $2.5M"`
- ‚ùå `"Player already picked!"` ‚Üí ‚úÖ `"‚ùå –≠—Ç–æ—Ç –∏–≥—Ä–æ–∫ —É–∂–µ –≤—ã–±—Ä–∞–Ω –∫–æ–º–∞–Ω–¥–æ–π Team Beta"`
- ‚ùå `"No free slot!"` ‚Üí ‚úÖ `"‚ö†Ô∏è –£ –≤–∞—Å –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å–ª–æ—Ç–∞ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ C"`

---

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 7.1 Unit –∏ E2E —Ç–µ—Å—Ç—ã
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ –ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–∏ (–∏–≥—Ä–æ–∫ C/LW –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å–ª–æ—Ç)
- ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –ø–æ —Å–∫–æ—Ä–∏–Ω–≥–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª–µ
- ‚úÖ Reconnect grace period (60 —Å–µ–∫)
- ‚úÖ –ê–≤—Ç–æ–ø–∏–∫ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞
- ‚úÖ Snake draft (—Ä–µ–≤–µ—Ä—Å –≤ —á—ë—Ç–Ω—ã—Ö —Ä–∞—É–Ω–¥–∞—Ö)
- ‚úÖ Race condition (–¥–≤–∞ –ø–∏–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è salary cap

### 7.2 Load –∏ Edge Cases
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π (50-100 concurrent users)
- –°–±–æ–π NHL API (fallback –Ω–∞ ESPN)
- –ì–æ–Ω–∫–∏ –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∏–∫–∞—Ö
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (XSS, SQL injection)

### 7.3 –ê—É–¥–∏—Ç-–ª–æ–≥–∏
**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–ª–æ–≥–∏—Ä—É—é—Ç—Å—è):**
- Kick user
- Pause/resume draft
- Leaderboard update
- Admin –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ä–æ–ª–∏, –ø–∞—Ä–æ–ª–∏)
- API fallback events

**–î–æ—Å—Ç—É–ø:** –ß–µ—Ä–µ–∑ admin dashboard (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

## 8. –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ–≤—å—é –∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫

### 8.1 –ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–∏
- [x] –¢–µ—Å—Ç-–∫–µ–π—Å—ã –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–∏–≥—Ä–æ–∫ C/LW –∑–∞–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å–ª–æ—Ç)
- [x] UI-–∏–Ω–¥–∏–∫–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: "C / LW")
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥—É–±–ª—è)

### 8.2 –°–∫–æ—Ä–∏–Ω–≥–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø—É–±–ª–∏—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ (–Ω–∞ —Å–ª—É—á–∞–π —Å–º–µ–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –ª–∏–≥–∏)
- [ ] –¢–µ—Å—Ç—ã –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π (17 –º–µ—Ç—Ä–∏–∫ skaters, 7 goalies)

### 8.3 Injury Status
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ injury data –∏–∑ NHL API
- [ ] Warning –≤ UI –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞–≤–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 8.4 Fallback API
- [ ] –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π fallback
- [ ] Retry logic (3 –ø–æ–ø—ã—Ç–∫–∏ ‚Üí fallback ‚Üí cache)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞—É–¥–∏—Ç

### 8.5 UI-–∏–Ω–¥–∏–∫–∞—Ü–∏—è
- [x] Reconnect indicator
- [x] Autopick badge
- [x] Your turn indicator
- [ ] Forced-pick indicator (–∑–∞–ø—Ä–µ—â–µ–Ω–æ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º)

### 8.6 –ê—É–¥–∏—Ç-–ª–æ–≥–∏
- [ ] –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –ª–æ–≥–æ–≤
- [ ] –ê–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] Admin dashboard –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### 8.7 Awards (Roadmap)
- [ ] MVP –Ω–µ–¥–µ–ª–∏
- [ ] Best pick (–ª—É—á—à–∏–π –≤—ã–±–æ—Ä)
- [ ] Other awards (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

## 9. Acceptance Criteria (–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏)

**–ó–∞–¥–∞—á–∞ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∫ production, –µ—Å–ª–∏:**

1. ‚úÖ –í—Å–µ unit/integration/e2e —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
2. ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–∞–≥–æ–≤ (–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –¥—Ä–∞—Ñ—Ç)
3. ‚úÖ RBAC –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (admin –Ω–µ –º–æ–∂–µ—Ç force-pick/undo)
4. ‚úÖ Salary cap –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%
5. ‚úÖ –ú—É–ª—å—Ç–∏–ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
6. ‚úÖ Reconnect grace period (60 —Å–µ–∫) —Ä–∞–±–æ—Ç–∞–µ—Ç
7. ‚úÖ –ê–≤—Ç–æ–ø–∏–∫ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–∞–π–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
8. ‚úÖ Snake draft –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–≤–µ—Ä—Å–∏—Ç –≤ —á—ë—Ç–Ω—ã—Ö —Ä–∞—É–Ω–¥–∞—Ö
9. ‚úÖ User-friendly error messages —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
10. ‚úÖ Security best practices —Å–æ–±–ª—é–¥–µ–Ω—ã (session, bcrypt, CORS)

**–ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—É–Ω–∫—Ç –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí –∑–∞–¥–∞—á–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É.**

---

## 10. Known Limitations (–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –ü—Ä–∏—á–∏–Ω–∞ | –ü–ª–∞–Ω—ã |
|------------|---------|-------|
| SQLite (single writer) | MVP —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –≤ v2.0 |
| In-memory sessions | –ü—Ä–æ—Å—Ç–æ—Ç–∞ deployment | Redis session store –≤ v1.0 |
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting | MVP —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤ v1.0 |
| ~700 –∏–≥—Ä–æ–∫–æ–≤ (–Ω–µ –≤—Å–µ NHL) | –ü–∞—Ä—Å–∏–Ω–≥ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ | –ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –≤ v1.0 |
| –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | MVP —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ | v2.0 |

---

## 11. Non-Functional Requirements (NFR)

### 11.1 Performance

**Latency targets:**
- `draft:pick` event –æ–±—Ä–∞–±–æ—Ç–∫–∞: **<200ms** (p95)
- REST API endpoints: **<100ms** (p95)
- Socket.IO message roundtrip: **<50ms** (p95)
- Database queries: **<50ms** (p95)

**Throughput requirements:**
- **Concurrent users:** 50-100 (MVP), 100-500 (v2.0)
- **Events per minute:** 500 (50 users √ó 10 picks/min)
- **Simultaneous draft rooms:** 10-15 active rooms

### 11.2 Security (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è v1.0)

**Authentication & Authorization:**
- ‚úÖ bcrypt password hashing (cost factor 10)
- ‚úÖ httpOnly session cookies
- ‚úÖ CORS whitelist –¥–ª—è production
- ‚úÖ RBAC enforcement (admin ‚â† force-pick/undo)

**Rate Limiting (v1.0):**
- **API endpoints:** 100 requests/min per IP
- **Draft picks:** 20 picks/min per user (–∑–∞—â–∏—Ç–∞ –æ—Ç spam)
- **Login attempts:** 5 attempts/15min per IP

**CSRF Protection (v1.0):**
- ‚úÖ CSRF tokens –¥–ª—è –≤—Å–µ—Ö POST/PUT/DELETE
- ‚úÖ Token validation —á–µ—Ä–µ–∑ middleware
- ‚úÖ SameSite cookies

**Input Sanitization (v1.0):**
- ‚úÖ XSS protection (HTML escape –≤—Å–µ—Ö user inputs)
- ‚úÖ SQL injection protection (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ Path traversal protection

**Security Headers:**
- ‚úÖ helmet middleware –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Content-Security-Policy –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ X-Frame-Options: DENY

### 11.3 Reliability

**Uptime targets:**
- **MVP (Internal Testing):** 99.0% (7.2 —á–∞—Å–∞ downtime/–º–µ—Å—è—Ü)
- **v1.0 (Public Beta):** 99.5% (3.6 —á–∞—Å–∞ downtime/–º–µ—Å—è—Ü)
- **v2.0 (Production):** 99.9% (43 –º–∏–Ω—É—Ç—ã downtime/–º–µ—Å—è—Ü)

**Graceful Shutdown:**
- **Timeout:** 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥—Ä–∞—Ñ—Ç–æ–≤
- **Behavior:** –ù–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è (503), —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è
- **Persistence:** –í—Å–µ state —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ SQLite –ø–µ—Ä–µ–¥ shutdown

**Auto-Recovery:**
- **Server restart:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ active draft rooms –∏–∑ persistence
- **Database restore:** <5 –º–∏–Ω—É—Ç –ø—Ä–∏ corruption
- **Session recovery:** Redis sessions (v2.0) –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç restart

**Data Integrity:**
- **Zero data loss:** –í—Å–µ picks –ø–µ—Ä—Å–∏—Å—Ç—è—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- **Transactional picks:** Salary cap + slot validation atomic
- **Audit trail:** –ü–æ–ª–Ω—ã–π –ª–æ–≥ –≤—Å–µ—Ö picks (–¥–ª—è dispute resolution)

### 11.4 Observability

**Structured Logging:**
- ‚úÖ JSON-—Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ (timestamp, level, module, context)
- ‚úÖ File output —Å —Ä–æ—Ç–∞—Ü–∏–µ–π (10MB limit, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è)
- ‚úÖ Separation: `error.log`, `combined.log`
- ‚úÖ Log levels: debug, info, warn, error
- ‚úÖ Context enrichment: roomId, userId, playerId –≤ –∫–∞–∂–¥–æ–º —Å–æ–±—ã—Ç–∏–∏

**Health Checks:**
- ‚úÖ `/health` - Liveness probe (always 200)
- ‚úÖ `/health/ready` - Readiness (validates DB, session)
- ‚úÖ `/health/live` - Kubernetes-style liveness
- ‚úÖ `/health/metrics` - System metrics (CPU, memory)

**Metrics (v1.0):**
- **Draft metrics:** active rooms, total picks, autopick rate
- **Performance:** p50/p95/p99 latency –¥–ª—è pick operations
- **Errors:** error rate by type (validation, timeout, etc.)
- **System:** CPU usage, memory, active connections

**Alerting (v1.0):**
- **Critical errors:** Immediate notification (email/Slack)
- **High error rate:** >5% picks fail ‚Üí alert
- **Performance degradation:** p95 latency >500ms ‚Üí alert
- **System resources:** CPU >80% / Memory >90% ‚Üí alert

### 11.5 Scalability

**MVP (Current - SQLite + In-Memory):**
- **Users:** 50-100 concurrent
- **Bottleneck:** SQLite write lock (single writer)
- **Deployment:** Single Node.js instance

**v1.0 (Redis Sessions):**
- **Users:** 50-100 concurrent (unchanged)
- **Benefit:** Session persistence (survive restart)
- **Cost:** Minimal (Upstash free tier)

**v2.0 (PostgreSQL + Redis):**
- **Users:** 100-500 concurrent
- **Database:** PostgreSQL (connection pool 20)
- **Sessions:** Redis session store
- **Deployment:** Single instance (clustering ready)

**v3.0 (Horizontal Scaling):**
- **Users:** 500+ concurrent
- **Architecture:** Node.js cluster (4 workers)
- **Redis:** Socket.IO adapter –¥–ª—è pub/sub
- **Load Balancer:** nginx –∏–ª–∏ cloud LB

### 11.6 User Experience

**Error Messages:**
- ‚ùå **–ù–ï–¢:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ stack traces
- ‚úÖ **–î–ê:** User-friendly –æ–±—ä—è—Å–Ω–µ–Ω–∏—è + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–ë–ê–î:  "TypeError: Cannot read property 'salary' of undefined"
–•–û–†–û–®–û: "–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω. –û–±–Ω–æ–≤–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."

–ë–ê–î:  "SALARY_CAP_EXCEEDED"
–•–û–†–û–®–û: "–ü—Ä–µ–≤—ã—à–µ–Ω salary cap –Ω–∞ $2,500,000. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ–ª–µ–µ –¥–µ—à—ë–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞."
```

**Loading States:**
- ‚úÖ Skeleton screens –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π >500ms
- ‚úÖ Progress indicators –¥–ª—è long-running tasks
- ‚úÖ Optimistic UI updates (pick –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è)

**Accessibility (WCAG 2.1 Level AA):**
- ‚úÖ Keyboard navigation –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ ARIA labels –¥–ª—è screen readers
- ‚úÖ Color contrast ratio >4.5:1
- ‚úÖ Focus indicators –≤–∏–¥–Ω—ã

### 11.7 Edge Cases –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

| –°—Ü–µ–Ω–∞—Ä–∏–π | –†–µ—à–µ–Ω–∏–µ | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|----------|---------|------------|
| **Pick –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ–∫—É–Ω–¥—É, –ø–∞–∫–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ timeout** | Grace period 2 —Å–µ–∫ –ø–æ—Å–ª–µ timeout, –∑–∞—Ç–µ–º reject —Å "Time expired" | `draftTimer.ts` |
| **2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–∏–∫–∞—é—Ç –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** | First-write-wins + error response "Player already picked" | `draft.ts:makePick` |
| **Admin –∫–∏–∫–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Ä–µ–º—è –µ–≥–æ –ø–∏–∫–∞** | –ê–≤—Ç–æ–ø–∏–∫ –ª—É—á—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ + notification kicked user | `lobby.ts:kickUser` |
| **Server restart –≤–æ –≤—Ä–µ–º—è –¥—Ä–∞—Ñ—Ç–∞** | Restore –∏–∑ SQLite persistence, reconnect grace 60 sec | `persistence/restore.ts` |
| **–ü–æ—Ç–µ—Ä—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect, 60 sec grace period | Socket.IO client |
| **Salary cap race condition (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –ø–∏–∫–∏)** | Transactional validation, lock state –≤–æ –≤—Ä–µ–º—è pick | `draft.ts:makePick` |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –ø–∏–∫–∞—Ç—å –ù–ï –≤ —Å–≤–æ–π —Ö–æ–¥** | Reject —Å "Not your turn" + –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ | `draft.ts:validateTurn` |
| **Database corruption** | Auto-recovery –∏–∑ backup (v2.0), fallback to in-memory (MVP) | `persistence/sqlite.ts` |
| **Memory leak –≤ long-running server** | Graceful restart –∫–∞–∂–¥—ã–µ 7 –¥–Ω–µ–π (production) | PM2 restart policy |

### 11.8 Acceptance Criteria –¥–ª—è Production

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ public release –¢–û–õ–¨–ö–û –µ—Å–ª–∏:**

**Security (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):**
1. ‚úÖ Rate limiting –∞–∫—Ç–∏–≤–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω (429 –ø–æ—Å–ª–µ –ª–∏–º–∏—Ç–∞)
2. ‚úÖ CSRF protection —Ä–∞–±–æ—Ç–∞–µ—Ç (403 –±–µ–∑ —Ç–æ–∫–µ–Ω–∞)
3. ‚úÖ Input sanitization –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 100% user inputs
4. ‚úÖ Security audit –ø—Ä–æ–π–¥–µ–Ω (OWASP Top 10 checklist)
5. ‚úÖ Penetration testing –≤—ã–ø–æ–ª–Ω–µ–Ω

**Observability (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):**
6. ‚úÖ Structured logs –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª—ã —Å rotation
7. ‚úÖ Health checks –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
8. ‚úÖ Error alerting –Ω–∞—Å—Ç—Ä–æ–µ–Ω (email/Slack)
9. ‚úÖ Monitoring dashboard –¥–æ—Å—Ç—É–ø–µ–Ω

**Testing (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):**
10. ‚úÖ –í—Å–µ unit/integration/e2e —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
11. ‚úÖ Load testing: 50 concurrent users –±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
12. ‚úÖ Stress testing: graceful degradation –ø—Ä–∏ 200% –Ω–∞–≥—Ä—É–∑–∫–µ
13. ‚úÖ Security testing: rate limiting, CSRF, XSS –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

**Documentation (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):**
14. ‚úÖ API documentation –∞–∫—Ç—É–∞–ª—å–Ω–∞ (Swagger)
15. ‚úÖ Deployment guide –æ–±–Ω–æ–≤–ª–µ–Ω
16. ‚úÖ Incident response playbook —Å–æ–∑–¥–∞–Ω
17. ‚úÖ User guide –∑–∞–≤–µ—Ä—à—ë–Ω

**Performance (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):**
18. ‚úÖ p95 latency <200ms –¥–ª—è draft:pick
19. ‚úÖ Zero data loss –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
20. ‚úÖ Graceful shutdown —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

**–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.**  
**–õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã.**  

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 24.10.2025  
**–í–µ—Ä—Å–∏—è:** 2.1 (–¥–æ–±–∞–≤–ª–µ–Ω—ã NFR)
